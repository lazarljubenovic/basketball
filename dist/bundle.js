!function(){"use strict";function t(t,n){const e=t%n;return e<n/2?t-e:t+(n-e)}var n=1e-6;function e(t,e){return Math.abs(t-e)<n}function r(t,n){return!e(t,n)}function o(t,n){return t<n&&r(t,n)}function u(t,n){return t>n&&r(t,n)}function i(t,n){return t<n||e(t,n)}function c(t){return e(0,t)}function f(t){return u(t,0)}function s(t){return o(t,0)}function l(t){return function(...n){for(let e=0;e<n.length-1;e++){const r=n[e],o=n[e+1];if(!t(r,o))return!1}return!0}}const a=l(e),g=l(o),h=l(u),y=l(i),d=l(function(t,n){return t>n||e(t,n)}),x=(...t)=>t.every(c),p=(...t)=>t.every(f),m=(...t)=>t.every(s);function b(t,n){return{x:t,y:n}}function v(t){return t.x}function w(t){return t.y}function M(t){return b(t.x,t.y)}function P(...t){return a(...t.map(v))&&a(...t.map(w))}function O(...t){let n=0,e=0;for(const r of t)n+=r.x,e+=r.y;return{x:n,y:e}}function j(t){return{x:-t.x,y:-t.y}}function k(t,...n){const e=j(O(...n));return O(t,e)}function S(t,n){return{x:t*n.x,y:t*n.y}}function I(t,n){return S(n/A(t),t)}function R(t,n){return t.x*n.x+t.y*n.y}function T(t,n){const e=t.x-n.x,r=t.y-n.y;return Math.hypot(e,r)}function A(t){const{x:n,y:e}=t;return Math.hypot(n,e)}function E(t,n){return t.x*n.y-t.y*n.x}function C(t,n){const e=Math.sin(n),r=Math.cos(n);return{x:t.x*r+t.y*e,y:-t.x*e+t.y*r}}var D=Object.freeze({t:b,x:v,y:w,clone:M,o:P,add:O,u:j,sub:k,i:S,s:I,l:function(t,n,e){return O(I(k(n,t),e),t)},g:R,h:T,p:A,m:function(t){const{x:n,y:e}=t;return Math.atan2(e,n)},v:function(n,e){return{x:t(n.x,e),y:t(n.y,e)}},M:function(t,n){let e=0,r=T(t,n[0]);for(let o=1;o<n.length;o++){let u=T(t,n[o]);u<r&&(r=u,e=o)}return{index:e,P:n[e],O:r}},j:E,k:function(t){return{x:-t.y,y:t.x}},rotate:C,S:function(t,n,e){return O(C(k(t,e),n),e)},toString:function(t){return`(${t.x}, ${t.y})`}});var F=Object.freeze({I:function(t,n=5){let e=t[0].x,r=t[0].y,o=t[0].x,u=t[0].y;for(let n=1;n<t.length;n++)t[n].x<e&&(e=t[n].x),t[n].x>o&&(o=t[n].x),t[n].y<r&&(r=t[n].y),t[n].y>u&&(u=t[n].y);return{R:e-n,T:r-n,A:o+n,C:u+n}},D:function({x:t,y:n},{R:e,T:r,A:o,C:u}){return y(e,t)&&y(t,o)&&y(r,n)&&y(n,u)},F:function(t,n){return{top:b(t.x,n.T),bottom:b(t.x,n.C),left:b(n.R,t.y),right:b(n.A,t.y)}}});function L(t,n){return{a:n.y-t.y,b:t.x-n.x,c:n.x*t.y-t.x*n.y}}function V({x:t,y:n},{a:e,b:r,c:o}){return e*t+r*n+o}function U(t,n,e){if(P(t,e))return 2;if(P(n,e))return 4;if(r(t.x,n.x)){if(g(t.x,e.x,n.x))return 1;if(h(t.x,e.x,n.x))return 1}else{if(y(t.y,e.y,n.y))return 1;if(d(t.y,e.y,n.y))return 1}return 0}var q=Object.freeze({L:function(t){const n=[];return 1&t&&n.push("Parallel"),2&t&&n.push("Collinear"),4&t&&n.push("U1"),8&t&&n.push("U2"),16&t&&n.push("V1"),32&t&&n.push("V2"),64&t&&n.push("DegenerateU"),128&t&&n.push("DegenerateV"),n.join(" ")},V:function(t,n,e,r){const o=L(t,n),u=V(e,o),i=V(r,o);if(p(u,i)||m(u,i))return 0;const c=L(e,r),f=V(t,c),s=V(n,c);return p(f,s)||m(f,s)?1:a(o.a*c.b,c.a*o.b)?2:1},U:function(t,n,e,r){const o=k(n,t),u=k(r,e),i=k(t,e),f=E(o,u);if(c(f)){if(!x(E(o,i),E(u,i)))return{type:0,flags:1};const f=R(o,o),s=R(u,u);if(x(f,s))return P(t,e)?{type:1,P:M(t),flags:254}:{type:0,flags:194};if(c(f)){const n=U(e,r,t);let o=64;return 0==n?{type:0,flags:o}:(o|=14,2==n&&(o|=16),4==n&&(o|=32),{type:1,P:M(t),flags:o})}if(c(s)){const r=U(t,n,e);let o=128;return 0==r?{type:0,flags:o}:(o|=50,2==r&&(o|=4),4==r&&(o|=8),{type:1,P:M(e),flags:o})}let l,d;const p=k(n,e);let m=3;c(u.x)?(l=i.y/u.y,d=p.y/u.y):(l=i.x/u.x,d=p.x/u.x);let b=!1;return h(l,d)&&([l,d]=[d,l],b=!0),h(l,1)||g(d,0)?{type:0,flags:3}:(y(0,l,1)&&(m|=b?8:4),y(0,d,1)&&(m|=b?4:8),l=g(l,0)?0:l,d=h(d,1)?1:d,(a(l,0)||a(d,0))&&(m|=16),(a(l,1)||a(d,1))&&(m|=32),a(l,d)?{type:1,P:O(e,S(l,u)),flags:m}:{type:2,q:O(e,S(l,u)),H:O(e,S(d,u)),flags:m})}const s=E(u,i)/f;if(g(s,0)||h(s,1))return{type:0,flags:0};const l=E(o,i)/f;if(g(l,0)||h(l,1))return{type:0,flags:0};const d=O(t,S(s,o));let p=0;return P(d,t)&&(p|=4),P(d,n)&&(p|=8),P(d,e)&&(p|=16),P(d,r)&&(p|=32),{type:1,P:d,flags:p}}});function z(t,n,e,r,u,f,s,l,a,g,h,y){const d=k(t,s),x=E(l,n);if(c(x))return null;const p=E(d,n),m=E(d,l)/x,b=p/x,v=f?i:o,w=g?i:o,M=y?i:o;return(r?i:o)(e,m)&&v(m,u)&&w(a,b)&&M(b,h)?O(t,S(m,n)):null}function H(t,n,e,r,o){return z(t,k(n,t),0,o,1,o,e,k(r,e),0,o,1,o)}function $(t,n,e,r,o){return z(t,n,0,o,1/0,!1,e,k(r,e),0,o,1,o)}var B=Object.freeze({$:z,B:H,N:function(t,n,e,r){return H(t,n,e,r,!0)},W:function(t,n,e,r){return H(t,n,e,r,!1)},G:$,J:function(t,n,e,r){return $(t,n,e,r,!0)},K:function(t,n,e,r){return $(t,n,e,r,!1)}});var N=Object.freeze({X:function(t){return 180*t/Math.PI},Y:function(t){return t*Math.PI/180}});var W=Object.freeze({Z:function(t,n,e){const r=k(n,t);return O(t,I(r,R(r,k(e,t))/T(n,t)))},_:function(t,n,e,r,o){const u=k(r,t),i=R(e,u);if(i<=0)return null;const c=A(e),f=i/c,s=A(u)**2-f**2,l=(n+o)**2;if(s>=l)return null;const a=l-s,g=f-Math.sqrt(a);return g>c?null:O(t,I(e,g))}}),G=Object.freeze({tt:D,nt:F,et:q,rt:B,ot:N,ut:W}),J=1e-6;function K(t,n){return!function(t,n){return Math.abs(t-n)<J}(t,n)}const Q=(X=function(t,n){return t<n&&K(t,n)},function(...t){for(let n=0;n<t.length-1;n++){const e=t[n],r=t[n+1];if(!X(e,r))return!1}return!0});var X;function Y(){const t=window.innerWidth,n=window.innerHeight,e=document.getElementById("game");e.style.width=t+"px",e.style.height=n+"px";const r=e.querySelector("svg");tt(r,n/t>1.6?[["width",.9*t],["height",1.6*t*.9]]:[["height",.9*n],["width",n/1.6*.9]])}const Z="http://www.w3.org/2000/svg";function _(t,n){const e=document.createElementNS(Z,t);return null!=n&&tt(e,n),e}function tt(t,n){return n.forEach(([n,e])=>t.setAttribute(n,e)),t}function nt(t,n){const e=_("svg",[["width",1e3],["height",1600],["viewBox","0 0 100 160"]]),r=_("rect",[["id","background"],["x",0],["y",0],["width","100%"],["height","100%"],["rx","5px"],["ry","5px"],["fill","white"]]),o=_("rect",[["x",20],["y",40],["width",60],["height",35],["rx",3],["ry",3],["stroke","#999"],["fill","white"]]),u=_("rect",[["x",36],["y",52],["width",28],["height",18],["rx",3],["ry",3],["stroke","#999"],["fill","white"]]),i=_("line",[["x1",n.it.x],["y1",n.it.y],["x2",n.ct.x],["y2",n.ct.y],["stroke-width",2],["stroke","#FF4136"],["stroke-linecap","round"]]),c=_("circle",[["id","ball"],["cx",n.ft.x],["cy",n.ft.y],["r",n.st],["fill","#EE863A"]]);e.append(r,o,u,i,c),t.appendChild(e),Y()}function et(t){const n=G.tt.sub(t,rt.ft),e=Math.atan2(n.y,n.x),r=5.5*Math.cos(e),o=5.5*Math.sin(e),u=G.tt.t(r,o);!function t(n){const e=function(t){const n=t.lt.y>0,e=n?function t(n){const e=[n.it,n.ct];for(const r of e){const e=G.ut._(n.ft,n.st,n.lt,r,n.at);if(null==e)continue;const o=e,u=G.tt.sub(r,o),i=G.tt.s(u,40),c=G.tt.k(i),f=G.tt.m(n.lt),s=G.tt.m(c),l=f-s,a=G.tt.add(n.ft,n.lt),g=G.tt.S(a,2*l,o),h=G.tt.sub(g,o);let y=G.tt.i(1.2,h);return Q(G.tt.p(y),1)&&(y=G.tt.s(y,1.2)),t(Object.assign({},n,{lt:y}))}return n}(t):t,r=t.gt||!!n&&function(t){const n=t.ft,e=G.tt.add(n,t.lt),r=G.tt.add(t.it,G.tt.t(5,0)),o=G.tt.add(t.ct,G.tt.t(-5,0));return 1==G.et.V(n,e,r,o)}(t),o=G.tt.add(e.ft,e.lt),u=G.tt.add(e.lt,e.ht);return o.x<-20||o.x>120||o.y>180?null:Object.assign({},e,{ft:o,lt:u,yt:e.yt+1,dt:n,gt:r})}(n);return function(){null!=e?(!function(t,n){const e=t.querySelector("#ball");"line"==e.previousElementSibling.tagName.toLowerCase()&&n.dt&&e.parentElement.insertBefore(e,e.previousElementSibling),tt(e,[["cx",n.ft.x],["cy",n.ft.y]])}(ct,e),requestAnimationFrame(t(e))):(it(),n.gt?(ot++,function(){const t=document.querySelector("svg"),n=_("text",[["text-anchor","middle"],["dominant-baseline","middle"],["y","13%"],["x","50%"],["fill","#aaa"]]);n.innerHTML=ot.toString(),t.append(n)}()):ot=0)}}(Object.assign({},rt,{lt:u}))()}let rt,ot=0;localStorage.getItem("highScore");function ut(){const t=(n=20,e=80,Math.random()*(e-n)+n);var n,e;return{ft:G.tt.t(t,140),st:8,lt:G.tt.t(0,0),yt:0,ht:G.tt.t(0,.16),it:G.tt.t(33,68),ct:G.tt.t(66,68),at:1,dt:!1,gt:!1}}function it(){!function(t){t.innerHTML=""}(ct),rt=ut(),nt(ct,rt)}const ct=document.getElementById("game");nt(ct,ut()),document.addEventListener("click",t=>{const n=document.querySelector("#background"),{top:e,left:r,width:o,height:u}=n.getBoundingClientRect(),i=100*(t.clientX-r)/o,c=160*(t.clientY-e)/u;et(G.tt.t(i,c))}),window.addEventListener("resize",Y),Y(),it()}();
